---
key: jekyll-text-theme
title: 'Workflow'
excerpt: 'Airflow, Dagster, Prefect + Workflow Task 😎'
tags: [Airflow, Dagster, Prefect+Workflow, Research]
---

# **Airflow, Dagster, Prefect + Workflow Task란?**


## **Airflow**

- Task (ex. 데이터 ETL, 파이프라인)들을 직접 하나씩 실행하는 것이 아니라, 실행 task별로 의존성을 가지고 실행 시켜주어, 먼저 실행되어야 하는 task가 끝나면 그 다음 task를 실행시키기 위한 것 - 쉽게 말해서 따로 따로 작성된 프로세스를 연결시켜 자동화 시켜준다 라고 보면된다.
- 실시간 스트리밍 처리보단 배치 처리(ex. 저장된 데이터를 etl하는 과정)에 주로 쓰인다.
- 배치 task 는 DAG(direct acycle graph)로 작성한다. - 방향성이 있는 그래프(비순환), 쉽게말해서 1->2->3->1 이 아닌 1->2->3과 같이 순환되지 않는 그래프를 뜻함
- 파이선 기반의 Airfllow는 쉽게 확장이 가능하고 다양한 시스템과 통합이 가능하다. 실제로 Airflow 커뮤니티에서 다양한 유형의 데이터 베이스, 클라우드 서비스 등과 통합할 수 있는 수 많은 애드온이 존재한다. ( ! DAG를 작성하는 것은 파이프라인 규모가 커지면 광장히 복잡해 질 수 있다. 때문에 장기적으로 Airflow DAG를 유지 관리 위해서는 초기 사용 시점에서부터 엄격한 관리가 필요하다.)
- 백필 기능 : 과거 데이터를 손쉽게 재처리할 수 있기 때문에 코드를 변경한 후 재생성이 필요한 데이터 재처리가 가능하다.
- 특징 - 위에 내용 간략하게 + 추가내용
  - schedule and monitor workflows
  - task scheduling
    - 언제 어떤 task
  - distribbution execution
    - 분산해서 실행
  - dependency management
    - 앞의 workflow가 끝나기전에 실행하면안된다는 의존!
    - 동시에 실행될 수는 있음..
  - Dag
    - Directed Acyclic Graph
    - 방향 o cycle x
  - Scalable(worker만 늘리면 무한대로 늘릴 수 있음)
  - 파이썬 코드로만 구현

 

## **Dagster**

- Airflow가 task 위주 였다면 이 친구는 data 위주임. task안의 로직과 같은 데이터 변환 로직을 데이터 어플리케이션으로 만들어 줌
- Airflow와 같이 Dag로 구성되어 있음(python)
- Airflow의 단점인 데이터의 흐름을 Dagster에서는 충분히 수치화해서 보여줌
- Airflow는 python에서 함수의 상속 또는 오버라이딩을 통해 flow를 작성하는데 Dagster는 정의해놓은 함수(데코레이터)를 통해 job을 작성한다
- 워크플로우의 각 단계를 표현하기 위해 소위 "solids"라고 하는 단위로 작업을 정의한다. 이러한 solids는 데이터 추출, 변환, 로드(ETL) 등과 같은 작업을 정의하는 데 사용됨.

 

## **Prefect**

- 기본적으로는 airflow와 같음
- Airflow 보다 최신에 나와서 유저가 사용하기 쉽게 해놓음, 하지만 prefect에 대한 정보 얻기 어려움(java언어와 go언어를 생각해보면 될 듯)
- Airflow는 복잡한 스케줄링 및 실행 요구 사항을 처리하는 데 뛰어나다면, Prefect는 간편한 워크플로우 정의 및 모니터링을 제공함.


## workflow task란?

* 위에 세 제품은 실행해야 하는 것을 Workflow로서 순차적으로 가능하게 해주고, 앞서 말한 ‘실행해야 하는 것’을 Workflow Task로 부른다.

* Workflow task에는 다음과 같은 해당 정보를 갖고 있음.

1. 작업 ID: 작업을 식별하는 고유한 이름 또는 식별자
2. 작업 유형: 어떤 유형의 작업인지를 나타내는 정보. 예를 들어, BashOperator를 사용하여 Bash 스크립트를 실행하는 작업, PythonOperator를 사용하여 Python 함수를 실행하는 작업
3. 작업 파라미터 및 인수: 작업 실행에 필요한 추가 매개변수 및 인수가 설정. 예를 들어, 명령줄 스크립트를 실행하는 경우 명령 및 환경 변수를 지정할 수 있음
4. 작업 의존성: 다른 작업에 대한 의존성을 정의함. 예를 들어, 작업 A는 작업 B가 완료되어야 시작될 수 있도록 설정할 수 있음
5. 작업 스케줄: 작업이 실행되는 시간 또는 주기를 지정함

 

|          | **Airflow**                                                  | **Dagster**                                      | **Prefect**                                                  |
| :------- | :----------------------------------------------------------- | :----------------------------------------------- | :----------------------------------------------------------- |
| 개인의견 | 사용시 리소스가 많아 정보 얻기에는 좋을 것 같음, 난이도가 있더라도 적용 시간이 넉넉하다면 선택할 것 같다. | 데이터의 흐름을 보려면 Dagster를 선택 해야할 듯. | python 레벨이 낮은 경우 사용하기 편리할 것 같다, 오류가 생길 시 처리하기 어려워서 간단한 workflow 작업에 적용하기 좋을 것 같다. |