---
key: jekyll-text-theme
title: 'SQLD - 반정규화와 성능'
excerpt: ''
tags: [SQLD]
---



# 반정규화와 성능

## 반정규화(De-Normalization)의 개념

* 반정규화: 시스템의 성능 향상, 개발 및 운영의 단순화를 위해 정규화된 데이터베이스 모델을 중복, 통합, 분리하는 데이터 모델링 기법 (역정규화 또는 비정규화로 부르기도 함)

## 반정규화 절차

* 반정규화 대상조사 -> 다른 방법 유도 -> 반정규화 적용 (순서대로 진행함)

* 반정규화 하기 전에 대안을 검토하는 작업을 먼저 함.(반정규화 시 데이터의 일관성을 유지하는 비용이 더 발생하기 때문)

### 1. 반정규화 대상 조사 :star:

* 범위처리 빈도수 조사: 일정한 범위를 조회하는 프로세스가 많은지 확인
* 대량의 범위처리 조사: 대량의 데이터 범윌르 자주 처리하는지 확인
* 통계성 프로세스 조사: 통계 정보를 필요로 하는 프로세스가 있는지 확인
* 테이블 조인 개수: 테이블에 조인의 개수가 많은지 확인

### 2. 다른 방법 유도:star:

* 뷰(view) 테이블: 성능을 고려한 뷰를 생성
* 클러스터링 적용: 클러스터링 팩터에 의해 저장방식을 다르게 적용
* 인덱스의 조정: 인덱스 변경 및 생성
* 응용 애플리케이션: 응용 메모리 영역에서 데이터를 캐시 처리

### 3. 반정규화 적용

* 테이블 반정규화: 테이블 병합, 분할, 주가
* 컬럼 반정규화: 중복 컬럼, 파생 컬럼, 이력 컬럼 추가
* 관계 반정규화: 중복관계 추가

## 반정규화 기법

* 테이블 반정규화, 컬럼 반정규화, 관계 반정규화

### 테이블 반정규화

| 기법        | 설명                                                         |
| ----------- | ------------------------------------------------------------ |
| 테이블 병합 | 1 : 1 관계, 1 : M 관계, 슈퍼/서브 타입 테이블 병합           |
| 테이블 분할 | - 테이블을 수직 또는 수평으로 분할<br/>- 테이블에서 특정 컬럼만 조회할 때 Disk I/O를 낮추기 위해서 수직 분할 이용함 |
| 테이블 추가 | 중복, 통계(집계), 이력, 부분 테이블 추가                     |

### 컬럼 반정규화

| 기법                        | 설명                                                         |
| --------------------------- | ------------------------------------------------------------ |
| 중복 컬럼 추가              | 조인을 감소시키기 위해 다수 테이블에 중복된 컬럼을 추가      |
| 파생 컬럼 추가              | 계산에 의한 성능 부하를 예방하기 위해 미리 값을 계산한 컬럼을 추가 |
| 이력 컬럼 추가              | 이력 데이터에서 최근 값을 고회하기 위한 기능성 컬럼을 추가   |
| 임시 컬럼 추가              | 애플리케이션 오작동 시 이전 데이터로 복귀하기 위한 임시 컬럼을 추가 |
| 기본키(PK)에 의한 컬럼 추가 | 단일 속성인 기본키(PK)가 복합 의미를 갖는 경우에 개별 의미를 일반 속성에 포함 |

### 관계

| 기법           | 설명                                                         |
| -------------- | ------------------------------------------------------------ |
| 중복 관계 추가 | 여러 경로를 거쳐야 조인이 가능한 경우 추가적인 관계를 생성해서 성능을 향상 |

## 반정규화의 성능 고려사항

* 중복성의 원리를 이용해서 데이터 조회 성능을 향상시키는 역할을 함
* 데이터를 조회할 때 디스크 I/O 양이 많아서 성능 저하가 예상되는 경우 -> 반정규화를 수행해서 성능을 향상시킴
* 정규화로 인해 엔티티가 증가하고 조인의 개수가 많아지는 경우 -> 반정규화를 고려
> 중복성의 원리
>
> 중복성의 원리에는 테이블의 중복성, 컬럼의 중복성, 관계의 중복성이 있음


<br/>

> **REFERENCE**
>
> 수제비 SQLD,  정보처리기술사연구회 지음
