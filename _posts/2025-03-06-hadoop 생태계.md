---
key: jekyll-text-theme
title: 'Hadoop 생태계'
excerpt: ' Hadoop study 😎'
tags: [Hadoop]
---

# Hadoop 생태계

* Hadoop은 단순히 HDFS와 MapReduce만이 아니라, 다양한 도구들과 함께 생태계를 이룸.

## 주요 생태계 도구

| 도구명     | 설명                         | 용도                                   |
|------------|------------------------------|----------------------------------------|
| Hive       | SQL 기반 데이터 웨어하우스   | HDFS 데이터 쿼리                       |
| HBase      | 분산 NoSQL 데이터베이스      | 실시간 랜덤 읽기/쓰기                  |
| Pig        | 데이터 흐름 스크립팅 언어    | ETL 파이프라인 구축                    |
| Sqoop      | RDBMS ↔ Hadoop 데이터 전송   | MySQL, Oracle 데이터 가져오기          |
| Flume      | 로그 수집 및 전송            | 웹 서버 로그를 HDFS로 수집             |
| Oozie      | 워크플로우 스케줄러          | 주기적인 배치 작업 관리                |
| Zookeeper  | 분산 코디네이션 서비스       | 클러스터 설정 및 동기화                |


## 생태계 아키텍처 예시

```
데이터 소스
    │
    ├─→ [Flume] ─────→ 로그 데이터 수집
    │                        ↓
    ├─→ [Sqoop] ─────→ RDBMS 데이터 가져오기
    │                        ↓
    └─→ [Kafka] ─────→ 실시간 스트리밍 데이터
                            ↓
                   ┌─────────────┐
                   │    HDFS     │
                   │ (데이터 저장) │
                   └─────────────┘
                            │
              ┌─────────────┼─────────────┐
              ▼             ▼             ▼
         [MapReduce]    [Spark]       [Hive]
         배치 처리      빠른 처리     SQL 쿼리
              │             │             │
              └─────────────┼─────────────┘
                            ▼
                   ┌─────────────┐
                   │   결과 저장  │
                   │ HDFS / HBase │
                   └─────────────┘
                            │
                            ▼
                    [시각화 도구]
                    대시보드, 리포트
```

## 4. 실전 적용 사례

### 사례 1: 웹 서비스 로그 분석

#### **시나리오**

* 하루에 수억 건의 로그가 발생하는 웹 서비스에서 사용자 행동 패턴을 분석하고 싶음.

#### **Hadoop 활용 흐름**

1. **데이터 수집**: 웹 서버에서 Flume을 통해 로그를 HDFS(/logs/2024/12/)로 수집
2. **데이터 처리**: MapReduce 작업으로 시간대별 접속자 수 집계, 페이지별 체류 시간 계산, 유입 경로 분석
3. **결과 저장**: 집계 결과를 Hive 테이블에 저장하고 대시보드로 시각화

#### **MapReduce 작업 예시**

- Map 단계: 로그 한 줄을 읽어서 (시간대, 1) 쌍으로 변환
- Reduce 단계: (시간대, [1,1,1...])을 받아서 (시간대, 총 접속자수)로 집계

예를 들어

- 10:00 → 15,234명
- 11:00 → 23,891명
- 12:00 → 31,456명

### 사례 2: 추천 시스템

#### **시나리오**

* 수천만 명의 사용자 구매 이력을 분석해서 상품을 추천함.

#### **Hadoop 활용 흐름**

1. **데이터 준비**: MySQL에 있는 구매 이력을 Sqoop으로 HDFS에 가져옴
2. **협업 필터링 계산**: MapReduce로 사용자 간 유사도 계산. 같은 상품을 구매한 사용자를 찾고, 유사 사용자가 구매한 다른 상품을 추출
3. **추천 결과 저장**: HBase에 사용자별 추천 상품 목록 저장
4. **API 서비스**: 애플리케이션에서 HBase를 조회하여 실시간으로 추천 제공

### 사례 3: 데이터 웨어하우스 구축

#### **시나리오**

* 여러 소스의 데이터를 통합하여 분석용 데이터 웨어하우스를 만듦.

#### **데이터 파이프라인 구조**

```
┌─────────────────────────────────────────────────────┐
│              데이터 소스                              │
│  MySQL    PostgreSQL    MongoDB    API 로그          │
└─────────────────────────────────────────────────────┘
                        │
                        ▼ (Sqoop, Flume)
┌─────────────────────────────────────────────────────┐
│           HDFS (Raw Data Layer)                      │
│        /raw/mysql/users/                             │
│        /raw/logs/events/                             │
└─────────────────────────────────────────────────────┘
                        │
                        ▼ (MapReduce, Spark)
┌─────────────────────────────────────────────────────┐
│         HDFS (Processed Data Layer)                  │
│        /processed/daily_summary/                     │
│        /processed/user_metrics/                      │
└─────────────────────────────────────────────────────┘
                        │
                        ▼ (Hive)
┌─────────────────────────────────────────────────────┐
│              Hive Tables (분석 레이어)               │
│        CREATE TABLE user_summary ...                 │
│        SELECT * FROM daily_metrics WHERE ...         │
└─────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────┐
│           BI 도구 (Tableau, Superset)                │
│              대시보드 & 리포트                        │
└─────────────────────────────────────────────────────┘
```