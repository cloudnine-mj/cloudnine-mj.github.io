---
key: jekyll-text-theme
title: 'AWS EC2'
excerpt: 'AWS Study 서비스 정리 - AWSKRUG Beginner Certification Study 😎'
tags: [AWS, SAA, cloud, study] 
---



# Computing

##  AWS EC2 소개

* **EC2 = Elastic Compute Cloud**

* AWS에서 제공하는 서비스형 Infrastructure (IaaS) ! (laaS = Infrastructure as a Service)

  * 가상 머신을 EC2에서 임대 (EC2 인스턴스)
  * 가상 드라이브 또는 EBS 볼륨에 데이터를 저장
  * ELB로 부하 분산, 로드밸런싱 가능
  * Auto Scaling 그룹을 통해 서비스 확장 가능

  > **참고**
  >
  > EBS (Elastic Block Store) : EC2 인스턴스에 연결하여 사용할 수 있는 가상 디스크
  >
  > ELB (Elastic Load Balancing): 여러 대의 EC2 인스턴스에 대한 트래픽을 분산시키는 역할 (서버 다운 현상 방지)
  >
  > ASG (Auto Scaling Groups): EC2 인스턴스의 수를 자동으로 조정하여 애플리케이션의 가용성을 유지하고, 로드에 따라 인스턴스 수를 증가 또는 감소시키는 서비스 (애플리케이션의 가용성 증가)

* EC2는 하나의 서비스가 아니라 많은 것을 포함함

* EC2 사용 방법을 아는 것은 클라우드 작동 방식을 이해하는 데 필수적! (클라우드는 필요할 때 마다 컴퓨팅을 대여할 수 있는 데 그 예시가 EC2)

* 사용자가 원하는 대로 가상 머신을 선택하고 AWS에서 빌릴 수 있음!



## EC2 sizing & Configuration options

* EC2 인스턴스 운영 체제 옵션

  * Linux
  * Windows
  * Mac OS

* CPU 

  * How much compute power & cores
  * 인스턴스에서 액세스 할 CPU 코어 수를 선택할 수 있음
  * 인스턴스 유형에 따라 1 ~ 128 코어까지 선택할  수 있음

* RAM

  * How much random-access memory
  * 인스턴스에서 액세스 할 RAM 양을 선택할 수 있음
  * 512 MB ~ 24 TB까지 선택 가능

* EBS, EFS / Hardware

* Network card

  * EC2 인스턴스에 연결할 네트워크의 종류를 선택하기
  * 속도가 빠른 Network card를 원하는 지 어떤 종류의 공용 IP를 원하는지 등

* EC2  인스턴스의 방화벽(Firewall) 규칙

  * EC2 인스턴스의 방화벽 규칙(보안 그룹)을 선택하기

* Bootstrap Scripts

  * 인스턴스를 구성하기 위한 Bootstrap Scripts, 이를 사용하여 인스턴스 구성을 자동화 할 수 있음(Installing updates, Installing software, Downloading common files from the Internet 등)
  * EC2 사용자 데이터 스크립트를 사용하여 인스턴스를 부트 스트래핑 할 수 있음
  * EC2 사용자 데이터 스크립트는 루트 계정에서 실행됩니다. 따라서 모든 명령문은 `sudo` !

  > **참고**
  >
  > 부트 스트래핑: 머신이 작동될 때 명령을 시작하는 것으로서 처음 시작할 때 한 번만 실행

## EC2 인스턴스 타입

:mag_right: 참고 사이트 [https://aws.amazon.com/ko/ec2/instance-types/](https://aws.amazon.com/ko/ec2/instance-types/)

* 여러가지 유형의 EC2 인스턴스가 있으며, 최적화 유형도 각각 다름

<img src ="https://user-images.githubusercontent.com/113915835/228312118-b31d255c-fa9c-4f58-96d7-06831141a88a.png" width="80%">

* EC2 Instance Type

| EC2 Instace           | Type                                        |
| --------------------- | ------------------------------------------- |
| General Purpose       | A1, T4g, T3, T3a, T2, M6g, M5, M5a, M5n, M4 |
| Compute Optimized     | C6g, C5, C5a, C5n, C4                       |
| Memory Optimized      | R6g, R5, R5a, R5n, R4, X1e, X1, z1d         |
| Storage Optimized     | I3, I3en, D2, H1                            |
| Accelerated Computing | P3, P2, Inf1, G4, G3, F1                    |

> **REFERENCE**
>
> [https://www.geeksforgeeks.org/amazon-ec2-instance-types/](https://www.geeksforgeeks.org/amazon-ec2-instance-types/)



* AWS Naming Convention

  * 예시) m5.2xlarge
    * m: instance class (범용 인스턴스)
    * 5: 인스턴스의 세대 (m5 이후에 m 유형의 인스턴스 클래스를 개선하면 m6)
    * 2xlarge: 인스턴스 클래스 내에서 크기 (small < large < 2xlarge < 4xlarge < ...), 크기가 클수록 인스턴스에 더 많은 메모리와 CPU를 가짐

### General Purpose
* 웹 서버, 코드 저장소와 같은 다양한 작업에 적합함

### Compute Optimized
* 고성능 처리가 필요한 애플리케이션, CPU 위주의 배치 처리 작업, 높은 처리량 기반 애플리케이션, 기계 학습 및 고성능 과학 계산 작업에 적합함

### Accelerated Computing
* 고성능 프로세서를 활용하는 컴퓨팅 집약적인 애플리케이션에 적합함
* 고성능 프로세서는 배치 처리 워크로드, 미디어 트랜스코딩, 고성능 웹 서버, HPC(고성능 컴퓨팅), 과학적 모델링, 전용 게임 서버 및 광고 서버 엔진, 기계 학습 추론 등에 사용됨
* 컴퓨터 최적화의 모든 인스턴스는 C로 시작하는 이름을 가지고 있음 (C5, C6 등)

### Memory Optimized

* 고성능 DB, 분산 웹스케일 캐시 저장소, BI에 최적화된 인메모리 데이터베이스, 대규모 비정형 데이터 실시간 처리 등에 사용함
* 메모리 최적화 인스턴스 이름은 R로 시작함 (X1이나 대용량 메모리 Z1도 있음)

### Storage Optimized

* 로컬 스토리지에서 대규모의 데이터셋에 액세스할 때 적합한 인스턴스
* 스토리지 최적화 인스턴스의 사용 사례로는 고주파 온라인 트랜잭션 처리인 OLTP 시스템에 사용되며 관계형과 비관계형인 NoSQL 데이터베이스에 사용함
* 레디스(Redis) 같은 메모리 데이터베이스의 캐시나 데이터 웨어하우징 애플리케이션과 분산 파일 시스템에 사용됨
* 스토리지 최적화 인스턴스는 이름이 I, G 또는 H1으로 시작함



## Security Group

* 보안 그룹은 AWS 클라우드에서 네트워크 보안 실행의 핵심이며 EC2 인스턴스에 들어오고 나가는 트래픽을 제어함
* 보안 그룹은 허용 규칙(Allow rule)만 포함
  * 출입이 허용된 것이 무엇인지 확인할 수 있고 IP 주소를 참조해 규칙 생성 가능
  * 컴퓨터의 위치나 다른 보안 그룹을 참조할 수 있고, 보안 그룹끼리도 서로 참조할 수 있음

* EC2 인스턴스의 방화벽(Firewall)
  * Port 액세스 통제
  * 인증된 IP 주소 범위 확인
  * Inbound/Outbound 네트워크 통제
* 보안 그룹과 인스턴스 간은 n:n 관계
* 리전과 VPC 결합으로 통제할 수 있음



### Classic Ports

* 22 / SSH(Secure Shell) : log into a Linux instance
* 21 / FTP(File Transfer Protocol) : upload files into a file share
* 22 / SFTP(Secure File Transfer Protocol) : upload files using SSH
* 80 / HTTP : access unsecured websites
* 443 / HTTPS : access secured websites
* 3389 / RDP(Remote Desktop Protocol) : log into a windows instance



### EC2 Instances 구매 옵션

| 구매 옵션                   | 설명                                                         |
| --------------------------- | ------------------------------------------------------------ |
| On demand                   | - 단기적인 워크로드에 적합 (사실상 모든 워크로드에 적합)<br/>- 비용 예측 가능, 초 단위로 요금 지불 가능 |
| Reserved(1년 또는 3년)      | - Reserved Instances는 장기적인 워크로드에 적합<br/>- 오랫동안 데이터베이스를 실행할 계획이라면 Reserved Instances가 적합<br/>- Covertible Reserved Instances는 장기적인 워크로드이지만 유연한 인스턴스 타입을 원할 때 적합<br/>- 시간이 지나 인스턴스 타입을 변경하길 원할 때 Covertible Reserved Instances가 적절 |
| Savings Plans(1년 또는 3년) | - 달러 단위로 특정한 사용량 약정<br/>- 장기 워크로드 (70% 까지 할인 받을 수 있음) 시간당 10달러로 약정 <br/>- 사용량이 한도 넘어가면 온디맨드 가격으로 청구되며, 특정한 인스턴스, 패밀리, 리전으로 고정 |
| Spot Instance               | - 짧은 워크로드에 사용 <br/>- 언제든 인스턴스가 손실될 수 있음 (90%까지 할인) <br/>- 배치 작업, 데이터 분석, 이미지 처리, 시간과 종료 시간이 유연한 워크로드에 유용함 <br/>- 중요한 작업이나 데이터베이스에 적절하지 않음 <br/>- 현재 스팟 가격이 정의된 최고 가격보다 높아지는 경우 유예 시간 2분 |
| Dedicated Hosts             | - 물리적 서버 전체를 예약해서 인스턴스 배치를 제어할 수 있음<br/>- 전용 인스턴스는 다른 고객이 여러분의 하드웨어를 공유하지 않는다는 의미<br/>- 온디맨드로 초당 비용 지불하거나 1년 또는 3년동안 예약 가능<br/>- 가장 비싼 옵션 |
| Capacity Reservations       | - 원하는 기간 동안 특정한 가용영역(AZ)에서 온디맨드 인스턴스 예약 가능 <br/>- 특정한 AZ에 있어야 하는 단기적이고 중단 없는 워크로드에 최적합<br/>- 기간 약정 없음 (언제든지 용량을 예약하고 취소할 수 있음)<br/>- 청구 할인 없음<br/>- 용량을 예약하는게 유일한 목적 |



<br/>

> **REFERENCE**
>
> [https://www.udemy.com/](https://www.udemy.com/) (AWS Certified Solutions Architect Associate, Stephane Maarek)
>
> [https://docs.aws.amazon.com/?nc2=h_ql_doc_do](https://docs.aws.amazon.com/?nc2=h_ql_doc_do)