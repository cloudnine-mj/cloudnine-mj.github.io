---
key: jekyll-text-theme
title: 'NACL'
excerpt: 'AWS Study 서비스 정리 - AWSKRUG Beginner Certification Study 😎'
tags: [AWS, SAA, cloud, study, Networking]
---





# Networking



## NACL :star:

### NACL 소개

* **NACL = Network Access Control List**
* 서브넷을 오가는 트래픽을 제어하는 방화벽과 비슷
* 서브넷 보안 단계

### Security Groups & NACL

* 언제 보안 그룹이 연결된 EC2 인스턴스를 사용하는 지 보자

<img src = "https://user-images.githubusercontent.com/113915835/231197561-424745d6-3afb-43d3-a60b-70309de514a5.png" width = "80%">

#### Incoming Request (들어오는 요청의 NACL 역할)

1. 요청이 서브넷에 들어가기 전 먼저 NACL로 이동
2. NACL에는 몇 가지의 인바운드 규칙이 정의되며, 요청이 허용되지 않으면 내부로 들어갈 수 없음 (NACL은 무상태)
3. 첫 번째 요청이 NACL을 통과해서 서브넷 내부에 도달
4. 보안 그룹 인바운드 규칙 만남 (보안 그룹의 특징은 상태 유지)

> :star:**NACL은 무상태이고 보안 그룹은 상태 유지?**
>
> 요청이 보안 그룹의 인바운드 규칙을 통과해서 EC2 인스턴스에 도달하면 EC2 인스턴스는 그 응답으로 애플리케이션 관점에서 응답할 내용을 모두 회신. 아웃바운드 규칙은 자동으로 보안 그룹 수준에서 허용 (보안 그룹의 특징이 상태 유지이기 때문) -> 들어가는 건 전부 나올 수 있음. 따라서 평가되는 규칙이 없음.
>
> :star:**보안 그룹 수준에서 아웃바운드 규칙이 항상 허용되는 이유가 상태 유지. 왜?**
>
> NACL은 무상태(상태 없음) -> 무상태이기 때문에 NACL 아웃바운드의 규칙이 평가됨 규칙이 통과하지 못하면 요청도 통과하지 못함.



#### Outgoing Request (보안 그룹에서 EC2 인스턴스가 아웃바운드 요청을 함)

* 

### NACL 특징

* 서브넷마다 하나의 NACL이 있음  (One NACL per subnet)
* 새로운 서브넷에는 기본 NACL이 할당됨
* NACL은 연결된 서브넷을 가지고 인바운드와 아웃바운드의 모든 요청을 허용하는 특수성을 가짐 



### NACL 규칙 정의

* 범위: 1 - 32,766
  * 숫자가 낮을수록 우선 순위가 높음 (우선 순위가 가장 높은 것은 1, 가장 낮은 것은 32,766)
* 첫 번째 규칙 비교로 결정이 됨
  * 예시) 









<br/>

> **REFERENCE**
>
> [https://www.udemy.com/](https://www.udemy.com/) (AWS Certified Solutions Architect Associate, Stephane Maarek)
>
> [https://docs.aws.amazon.com/?nc2=h_ql_doc_do](https://docs.aws.amazon.com/?nc2=h_ql_doc_do)