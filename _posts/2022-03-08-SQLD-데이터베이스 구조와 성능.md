---
key: jekyll-text-theme
title: 'SQLD - 데이터베이스 구조와 성능'
excerpt: ''
tags: [SQLD]	
---



## 슈퍼타입과 서브 타입 데이터 모델의 성능 고려사항

### 슈퍼타입과 서브 타입의 데이터 모델의 변환 방법

* 슈퍼타입과 서브 타입 데이터 모델은 물리 모델링 단계에서 1 : 1 타입, 슈퍼+서브 타입, All in One 타입으로 변환할 수 있음

#### ① 1 : 1 타입(One to One 타입) :star:

* 슈퍼타입과 서브 타입 데이터 모델의 변환 방법

#### ② 슈퍼+서브 타입(Plus Type) :star:

* 슈퍼타입을 각 서브 타입에 통합하고, 서브 타입을 개별 테이블로 생성

#### ③ All in One 타입(Single Type) :star:

* 슈퍼타입과 서브 타입 모델을 하나의 테이블로 통합해서 생성



### 슈퍼타입과 서브 타입 데이터 모델의 성능 고려 사항

```
트랜잭션의 특성을 고려하지 않고 슈퍼타입과 서브 타입 데이터 모델을 변환하면 데이터베이스의 성능이 저하되는 문제가 발생
```

* **개별 트랜잭션 발생**
  * 슈퍼타입과 서브 타입에 업무 트랜잭션이 독립적으로 발생하는 경우에는 1 : 1 으로 변환
  * 개별 트랜잭션에 맞게 테이블을 생성함으로써 디스크 I/O를 줄일 수 있음
  * 트랜잭션은 항상 서브타입 개별로 처리하는데 테이블은 하나로 통합하여 변환하면 불필요하게 많은 양의 데이터가 집적되어 있어 성능이 저하됨
* **슈퍼타입 + 서브 타입 트랜잭션 발생**
  * 슈퍼타입과 서브 타입을 묶어서 트랜잭션이 발생하는 경우에는 슈퍼 + 서브 타입으로 변환
  * 슈퍼타입을 각 서브 타입에 필요한 속성만 통합함으로써 디스크 I/O를 줄일 수 있음
  * 슈퍼타입 및 서브타입 간에 조인이 다수 발생할 수 있으며, 서브타입이 다수인 경우 관리하기에 용이하지 않음
  * 트랜잭션은 항상 슈퍼타입과 서브타입을 함께 처리하는데 개별로 유지하면 조인에 의해 성능이 저하됨
* **전체 트랜잭션 발생**
  * 전체를 하나로 묶어 트랜잭션이 발생하는 경우에는 All in One 타입으로 변환
  * 전체를 통합함으로써 관리하기에 용이하고 조인이 줄어들어 성능이 향상됨
  * 다수의 속성을 하나의 테이블에 저장하기 때문에 I/O 효율이 좋지 않음
  * 서브 타입 간에 조인이 다수 발생할 수 있으며, 서브 타입이 다수인 경우 관리하기에 용이하지 않음
  * 트랜잭션은 항상 전체를 대상으로 일괄 처리하는데, 테이블은 서브타입 별로 개별 유지하는 것으로 변환하면 Union 연산에 의해 성능이 저하됨

### 기본키(PK),  외래키(FK) 성능 고려 사항

* 기본키(PK)는 인덱스와 PK 컬럼 순서를 고려해야 함

  * PK 제약 조건을 구현하기 위해서 Unique 인덱스를 사용
  * Random Access를 위해 Unique 인덱스를 사용하면 데이터 조회 성능이 향상됨
  * 복합 컬럼으로 구성된 PK에서 등치조건(=)이나 범위 조건(BETWEEN, <,>)을 사용하는 컬럼을 선두 컬럼으로 정해야 인덱스를 효율적으로 이용할 수 있음
  * PK 컬럼 순서를 조정하지 않으면, 데이터 조회 성능이 저하될 수 있음

  > PK 컬럼 순서를 결정하는 기준은 등치조건(=)이나 범위 조건(BETWEEN, <,>)

* 외래키는 인덱스와 업무적 활용도를 고려해야 함

  * FK 속성에 대해 인덱스를 생성하지 않으면, 데이터 조회 성능이 저하될 수 있음
  * FK 속성에 기본정책으로 인덱스를 생성하고, 업무적으로 자주 활용되지 않는 경우에 인덱스 삭제를 고려함



<br/>

> **REFERENCE**
>
> 수제비 SQLD,  정보처리기술사연구회 지음



