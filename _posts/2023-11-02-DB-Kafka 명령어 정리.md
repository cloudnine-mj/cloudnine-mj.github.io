---
key: jekyll-text-theme
title: 'Kafka ëª…ë ¹ì–´ ì •ë¦¬'
excerpt: 'Kafka Research ğŸ˜'
tags: [Kafka, Research]
---

# Kafka ëª…ë ¹ì–´ ì •ë¦¬

ğŸ¯ ì—…ë¬´ì—ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” Kafka ëª…ë ¹ì–´ ì •ë¦¬

## Topic ìƒì„±

```
bin/kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test-topic
```

## Topic ë¦¬ìŠ¤íŠ¸ í™•ì¸

```
bin/kafka-topics.sh --bootstrap-server localhost:9092 --list
```

## Topic ìƒì„¸ ë³´ê¸°

```
bin/kafka-topics.sh --bootstrap-server localhost:9092 --topic test-topic --describe
```

## Topic ì„¤ì • ë³€ê²½

* ë””ìŠ¤í¬ ê³µê°„ í™•ë³´ì‹œ í•„ìš”. 
* ìš´ì˜ ì¤‘ ë””ìŠ¤í¬ ê³µê°„ì„ í™•ë³´í•˜ëŠ” ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ë””ìŠ¤í¬ ê³µê°„ì„ ê°€ì¥ ë§ì´ ì°¨ì§€ í•˜ëŠ” í† í”½ì˜ ë³´ê´€ ì£¼ê¸°ë¥¼ ì¤„ì—¬ì£¼ëŠ” ê²ƒ.
* ë³´ê´€ì£¼ê¸°ì˜ ì˜µì…˜ì„ ì£¼ì§€ì•Šê³  í† í”½ì„ ìƒì„±í–ˆë‹¤ë©´ ê¸°ë³¸ê°’ì€ 7ì¼
* ë³´ê´€ ì£¼ê¸°ë¥¼ 1ì‹œê°„ìœ¼ë¡œ ì¤„ì´ëŠ” ëª…ë ¹ë¬¸

```
bin/kafka-topics.sh --zookeeper localhost:2181 --alter --topic newdata3 --config retention.ms=3600000
```

## Topicì˜ íŒŒí‹°ì…˜ ìˆ˜ ë³€ê²½

* ì¹´í”„ì¹´ì—ì„œëŠ” ìš´ì˜ ì¤‘ì— ê°„ë‹¨í•œ ëª…ë ¹ì–´ë¡œ í† í”½ì˜ íŒŒí‹°ì…˜ ìˆ˜ë¥¼ ëŠ˜ë ¤ì¤„ ìˆ˜ ìˆìŒ.
* ì£¼ì˜í•  ì ì€ í† í”½ì˜ íŒŒí‹°ì…˜ ìˆ˜ëŠ” **ì¦ê°€ë§Œ ê°€ëŠ¥**í•˜ê³ , ê°ì†ŒëŠ” ë¶ˆê°€ëŠ¥.
* íŒŒí‹°ì…˜ë§Œ ì¦ê°€í–ˆë‹¤ê³  ë©”ì‹œì§€ì— ëŒ€í•œ ì „ì²´ ì²˜ë¦¬ ì„±ëŠ¥ì´ ì¢‹ì•„ì§€ëŠ” ê²ƒì€ ì•„ë‹˜.
* íŒŒí‹°ì…˜ì˜ ìˆ˜ë§Œí¼ ì»¨ìŠˆë¨¸ ì—­ì‹œ ì¶”ê°€í•´ì¤˜ì•¼ í•¨.
* ë‹¨, keyë¥¼ ì´ìš©í•´ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê³  ê°€ì ¸ì˜¤ëŠ” í˜•íƒœë¥¼ ìš´ì˜í•˜ê³  ìˆë‹¤ë©´ íŒŒí‹°ì…˜ ìˆ˜ë¥¼ ë³€ê²½í•  ë•Œ ì£¼ì˜í•´ì•¼ í•¨.

```
bin/kafka-topics.sh --zookeeper localhost:2181 --alter --topic test-topic -partitions 2
```

## Topicì˜ replication-factor ë³€ê²½

* ë³€ê²½ì„ ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ json í˜•ì‹ íŒŒì¼ í•„ìš”

```
{"version":1,
"partitions":[
    {"topic":"test-topic","partition":0,"replicas":[1,2]},
    {"topic":"test-topic","partition":0,"replicas":[2,3]}
]}
```

* json íŒŒì¼ ì‹¤í–‰í•˜ì—¬ replication-factor ìƒì„±

```
bin/kafka-reassign-partitions.sh --zookeeper mj-zk001:2181,mj-zk002:2181,mj-zk003:2181/mj-kafka --reassignment-json-file /usr/local/kafka/rf.json --execute
```

## Consumer group ë¦¬ìŠ¤íŠ¸ í™•ì¸

```
bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --list
```

## Consumer ìƒíƒœì™€ offset í™•ì¸

```
bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --group test-consumer --describe
```